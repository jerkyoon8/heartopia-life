<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<body>

    <!-- 
        Common Filter Bar Fragment 
        Parameters:
        - titleHolder: (Optional) Content for the left side if needed? No, usually search is generic.
    -->
    <div th:fragment="filterBar">
        <div class="filter-bar">
            <!-- Search -->
            <div class="filter-group" style="flex-grow: 2;">
                <i class="fas fa-search text-secondary"></i>
                <input type="text" id="searchInput" class="search-input" placeholder="이름 검색...">
            </div>

            <!-- Custom Filters Slot (Content passed from parent) -->
            <!-- Note: In Thymeleaf, we can't easily 'slot' content into a fragment without using 'th:replace' on the parent side calling this, 
                 or passing the customized part as a variable.
                 
                 Strategy: The calling page defines the specific <select> elements, and we just provide the 'filter-bar' container in CSS.
                 
                 HOWEVER, to unify the Sort/Reset buttons, we can make those a fragment or part of this one.
                 
                 Better Strategy: The specific page provides the selects. We provide a fragment for the "Sort & Reset Control Group".
                 
                 Let's stick to providing a `filterControlGroup` fragment that has the Search, Sort, and Reset. The middle part (custom filters) 
                 will be inserted by the calling page using layout dialet or just generic HTML structure.
                 
                 Actually, simpler:
                 The calling page writes uses the `.filter-bar` class.
                 We provide a fragment for the `Sort & Reset` buttons to avoid copy-pasting those.
            -->
        </div>
    </div>

    <!-- 
        Recommended Usage in Parent Page: 
        <div class="filter-bar">
             <div class="filter-group">...search input...</div>
             ... custom selects ...
             <div th:replace="~{fragments/wiki-components :: sortAndReset}"></div>
        </div>
        
        Wait, I can make a fragment that accepts a chunk of HTML for the filters? 
        th:replace="~{fragments/wiki-components :: filterContainer(~{:: #my-filters})}"
    -->

    <div th:fragment="sortAndReset" class="d-flex align-items-center gap-2">
        <!-- Sort Buttons Group -->
        <div class="sort-group" id="sortGroup">
            <!-- Icon -->
            <i class="fas fa-exchange-alt fa-rotate-90 text-secondary me-1" style="font-size: 0.9rem;"></i>

            <button type="button" class="sort-chip active" data-sort="name" data-order="asc">
                이름 <i class="fas fa-arrow-up"></i>
            </button>
            <button type="button" class="sort-chip" data-sort="level" data-order="asc">
                레벨
            </button>
            <button type="button" class="sort-chip" data-sort="price" data-order="desc">
                가격
            </button>
        </div>

        <!-- Vertical Separator -->
        <div class="vr mx-2"></div>

        <!-- Reset -->
        <button id="resetBtn" class="btn-reset">
            <i class="fas fa-undo"></i> 초기화
        </button>
    </div>

    <!-- 
        Price Display Fragment 
        Expects: ${item} object having a 'prices' list
        Parameters: prices (List<Integer>)
    -->
    <div th:fragment="priceDisplay(prices)" class="mt-2">
        <p class="small fw-bold mb-1"><i class="fas fa-coins me-1 text-warning"></i>등급별 판매가</p>
        <div class="d-flex justify-content-between gap-1">
            <div th:each="price, iterStat : ${prices}" class="text-center flex-fill border rounded py-1 bg-light">
                <div class="small text-muted" th:text="${iterStat.count} + '★'"></div>
                <div class="fw-bold small" th:text="${price != null ? price : '-'}"></div>
            </div>
        </div>
    </div>

</body>

</html>