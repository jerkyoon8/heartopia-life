<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heartopia Interactive Map</title>
    <!-- Pretendard Font -->
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome (Icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Common CSS -->
    <link rel="stylesheet" href="/css/common.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!-- Map CSS -->
    <link rel="stylesheet" th:href="@{/css/map.css(v=1.1)}">

    <style>
        /* Paperlogy Font */
        @font-face {
            font-family: 'Paperlogy';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2408-3@1.0/Paperlogy-4Regular.woff2') format('woff2');
            font-weight: 400;
            font-display: swap;
        }

        @font-face {
            font-family: 'Paperlogy';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2408-3@1.0/Paperlogy-7Bold.woff2') format('woff2');
            font-weight: 700;
            font-display: swap;
        }

        /* Page Title Section */
        .map-page-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .map-page-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
        }

        .map-page-title {
            font-family: 'Paperlogy', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin: 0 0 8px;
        }

        .map-page-desc {
            font-family: 'Paperlogy', sans-serif;
            font-size: 14px;
            color: #888;
            margin: 0;
            line-height: 1.6;
        }

        /* Breadcrumb */
        .map-breadcrumb {
            font-size: 13px;
            color: #aaa;
            margin-bottom: 25px;
        }

        .map-breadcrumb a {
            color: #999;
            text-decoration: none;
        }

        .map-breadcrumb a:hover {
            color: #0d6efd;
        }

        .map-breadcrumb .separator {
            margin: 0 8px;
        }
    </style>
</head>

<body>

    <!-- Top Navigation Bar (Common Fragment) -->
    <div th:replace="~{fragments/header :: header}"></div>

    <!-- Main Body -->
    <div class="mw-body">

        <!-- Breadcrumb -->
        <div class="map-breadcrumb">
            <a th:href="@{/wiki}"><i class="fas fa-home"></i> Home</a>
            <span class="separator">â€º</span>
            <span>Map</span>
        </div>

        <!-- Page Title -->
        <div class="map-page-header">
            <div class="map-page-icon">ğŸ—ºï¸</div>
            <h1 class="map-page-title">Heartopia Interactive Map</h1>
            <p class="map-page-desc">
                ë‘ê·¼ë‘ê·¼ íƒ€ìš´ì˜ ì¸í„°ë™í‹°ë¸Œ ë§µì…ë‹ˆë‹¤.<br>
                ì£¼ë¯¼, ìƒì , ë²„ìŠ¤ ì •ë¥˜ì¥ ë“± ë‹¤ì–‘í•œ ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.
            </p>
        </div>

        <!-- Map Layout: Side Panel + Map -->
        <div class="map-layout">

            <!-- Left Side Panel (í•­ìƒ ë³´ì´ëŠ” ì™¸ë¶€ íŒ¨ë„) -->
            <div class="map-side-panel" id="mapSidePanel">
                <div class="side-panel-header">
                    <h3>ğŸ“ í•€ ê´€ë¦¬</h3>
                </div>

                <div class="side-panel-search">
                    <input type="text" id="pinSearch" placeholder="í•€ ê²€ìƒ‰..." />
                </div>

                <div class="side-panel-controls">
                    <button class="btn-control" id="showAll" title="ì „ì²´ í‘œì‹œ">
                        <i class="fas fa-eye"></i> ì „ì²´ í‘œì‹œ
                    </button>
                    <button class="btn-control" id="hideAll" title="ì „ì²´ ë„ê¸°">
                        <i class="fas fa-eye-slash"></i> ì „ì²´ ë„ê¸°
                    </button>
                </div>

                <div class="side-panel-categories" id="categoryList">
                    <!-- JSë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>

            <!-- Right: Map Area -->
            <div class="map-area">
                <!-- Placement Mode Banner -->
                <div class="placement-banner" id="placementBanner">
                    <div class="placement-banner-content">
                        <span class="placement-banner-icon">ğŸ“Œ</span>
                        <span class="placement-banner-text" id="placementText">ë°°ì¹˜í•  í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”</span>
                        <button class="placement-cancel-btn" id="placementCancel">
                            <i class="fas fa-times"></i> ì·¨ì†Œ
                        </button>
                    </div>
                </div>

                <!-- Toast Notification -->
                <div class="map-toast" id="mapToast">
                    <span class="map-toast-icon">âœ…</span>
                    <span class="map-toast-text" id="mapToastText"></span>
                </div>

                <!-- Info Box (Bottom Left) for Fish, Insect, Bird -->
                <div class="map-info-box" id="mapInfoBox">
                    <button class="info-box-close" id="infoBoxClose"><i class="fas fa-times"></i></button>
                    <div id="infoBoxContent"></div>
                </div>

                <!-- Leaflet Map -->
                <div id="map"></div>
            </div>

        </div>

    </div>

    <!-- Footer (Common Fragment) -->
    <div th:replace="~{fragments/footer :: footer}"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script th:src="@{/js/map.js(v=1.12)}"></script>
</body>

</html>